!function(){"use strict";var e=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};document.addEventListener("DOMContentLoaded",function(){var t=!!("ontouchstart"in window)||window.navigator.msMaxTouchPoints>0;document.documentElement.classList.add(t?"touch":"no-touch");var n={homepage:document.querySelector(".section--homepage"),form:document.querySelector(".section--form"),visualizations:document.querySelector(".section--visualizations")},o=function(e){e.classList.remove("section--active"),e.nextElementSibling.classList.add("section--active")};document.querySelector("#homepage-button").addEventListener("click",function(){o(n.homepage)});var l={gender:document.querySelector("#user-gender"),profession:document.querySelector("#user-profession"),country:document.querySelector("#user-country"),salary:document.querySelector("#user-salary")};document.querySelector("#form-button").addEventListener("click",function(){console.log(l.gender.options[l.gender.selectedIndex].value),console.log(l.profession.value),console.log(l.country.value),console.log(l.salary.value)});var r=document.querySelector(".overlay"),i=function(){r.classList.add("overlay--open")},a=function(){r.classList.remove("overlay--open")},d=function(e){e.classList.add("field--open"),i()},c=function(){document.querySelector(".field--open").classList.remove("field--open"),a()};r.addEventListener("click",c);var s=function(t){var n={};n.field=document.createElement("div"),n.field.className="field field--dropdown",n.toggle=document.createElement("a"),n.toggle.className="field__toggle",n.toggle.innerHTML=t.options[t.selectedIndex].innerHTML,n.modal=document.createElement("ul"),n.modal.className="field__modal field--dropdown__list";var o="";t.querySelectorAll("option").forEach(function(e,n){o+=t.selectedIndex===n?"<li class='field--dropdown__list-item field--dropdown__list-item--checked'>"+e.innerHTML+"</li>":"<li class='field--dropdown__list-item'>"+e.innerHTML+"</li>"}),n.modal.innerHTML=o,n.field.appendChild(n.toggle),n.field.appendChild(n.modal),t.parentNode.insertBefore(n.field,t),t.style.display="none";var l=function(e){e.preventDefault(),e.stopPropagation(),d(n.field)};n.toggle.addEventListener("click",l),n.toggle.addEventListener("touchstart",l);var r=function(e,o){e.preventDefault();var l=0,r=null,i=n.modal.querySelector(".field--dropdown__list-item--checked");for(l=0,r=i,l=0;r=r.previousSibling;l++);for(i.classList.remove("field--dropdown__list-item--checked"),t.options[l].removeAttribute("selected"),l=0,r=o,l=0;r=r.previousSibling;l++);o.classList.add("field--dropdown__list-item--checked"),t.options[l].setAttribute("selected","selected"),n.toggle.innerHTML=o.innerHTML,c()},i=n.modal.querySelectorAll(".field--dropdown__list-item");[].concat(e(i)).forEach(function(e){e.addEventListener("click",function(t){r(t,e)}),e.addEventListener("touchstart",function(t){r(t,e)})})},u=function(e){var t={};t.field=document.createElement("div"),t.field.className="field field--text",t.toggle=document.createElement("a"),t.toggle.innerHTML=e.placeholder,t.toggle.className="field__toggle",t.modal=document.createElement("ul"),t.modal.className="field__modal",t.input=document.createElement("input"),t.input.setAttribute("type","text"),t.input.placeholder=e.placeholder,t.input.className="field--text__input",t.inputWrapper=document.createElement("li"),t.inputWrapper.className="field--text__input-wrapper",t.go=document.createElement("button"),t.go.className="field--text__go",t.go.innerHTML="<img alt='' src='images/icons/arrow.svg'>",t.inputWrapper.appendChild(t.input),t.inputWrapper.appendChild(t.go),t.example=document.createElement("li"),t.example.className="field--text__example",t.example.innerHTML=e.getAttribute("data-subline"),t.modal.appendChild(t.inputWrapper),t.modal.appendChild(t.example),t.field.appendChild(t.toggle),t.field.appendChild(t.modal),e.parentNode.insertBefore(t.field,e),e.style.display="none";var n=function(e){e.preventDefault(),e.stopPropagation(),d(t.field),t.input.focus()};t.toggle.addEventListener("click",n),t.toggle.addEventListener("touchstart",n);var o=function(n){n.preventDefault(),t.input.blur(),t.toggle.innerHTML=""!==t.input.value.trim()?t.input.value:t.input.placeholder,e.value=t.toggle.innerHTML,c()};t.inputWrapper.addEventListener("keydown",function(e){13===e.keyCode&&o(e)}),t.go.addEventListener("click",o),t.go.addEventListener("touchstart",o)};fetch("data/data.csv").then(function(e){return e.text()}).then(function(t){for(var o=d3.csvParse(t),r=o.map(function(e){return e.country}),i=0;i<r.length/2;i++)l.country.insertAdjacentHTML("beforeend","<option>"+r[i]+"</option>");var a=document.querySelectorAll("select"),d=document.querySelectorAll("input");[].concat(e(a)).forEach(function(e){return s(e)}),[].concat(e(d)).forEach(function(e){return u(e)});var c=n.form.querySelector(".form__paragraph"),p=c.querySelectorAll(".field"),f=function(){[].concat(e(p)).forEach(function(e){e.querySelector(".field__modal").style.left=-(e.offsetLeft-c.offsetLeft)+"px"})};f(),window.addEventListener("resize",f)}).catch(function(e){return console.error(e)})})}();